<!DOCTYPE html>
<html lang="en">
<head>
  
    <title>Lecture 10 :: CSE 2421 TL;DR</title>
  
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="Lecture 10 Video : C Pointers 2 Part A Video : C Pointers 2 Part B
Slides : C Pointers Part 2
Pointers part 2 Relationship between arrays and pointers, void pointers, dynamic memory, pointer arithmetic, and passing pointers.
Arrays Arrays can only be accessed by pointers. Static arrays are allocated by the compiler, dynamic arrays must be allocated with malloc at runtime and will be referenced by a void pointer." />
<meta name="keywords" content="" />
<meta name="robots" content="noodp" />
<link rel="canonical" href="/cse2421tldr/posts/lecture-10/" />




<link rel="stylesheet" href="/cse2421tldr/assets/style.css">






<link rel="apple-touch-icon" href="/cse2421tldr/img/apple-touch-icon-192x192.png">

  <link rel="shortcut icon" href="/cse2421tldr/img/favicon/orange.png">



<meta name="twitter:card" content="summary" />

  
    <meta name="twitter:site" content="" />
  
    <meta name="twitter:creator" content="" />



<meta property="og:locale" content="en" />
<meta property="og:type" content="article" />
<meta property="og:title" content="Lecture 10">
<meta property="og:description" content="C Pointers Part 2" />
<meta property="og:url" content="/cse2421tldr/posts/lecture-10/" />
<meta property="og:site_name" content="CSE 2421 TL;DR" />

  
    <meta property="og:image" content="/cse2421tldr/img/favicon/orange.png">
  

<meta property="og:image:width" content="2048">
<meta property="og:image:height" content="1024">


  <meta property="article:published_time" content="2020-01-28 02:30:11 -0500 -0500" />












</head>
<body class="orange">


<div class="container center headings--one-size">

  <header class="header">
  <div class="header__inner">
    <div class="header__logo">
      <a href="/cse2421tldr/">
  <div class="logo">
    CSE 2421 TL;DR
  </div>
</a>

    </div>
    
  </div>
  
</header>


  <div class="content">
    
<div class="post">
  <h1 class="post-title">
    <a href="/cse2421tldr/posts/lecture-10/">Lecture 10</a></h1>
  <div class="post-meta">
    
      <span class="post-date">
        2020-01-28 [Updated: 2020-01-28]
      </span>
    
    
  </div>

  
  <span class="post-tags">
    
    #<a href="/cse2421tldr/tags/pointers/">pointers</a>&nbsp;
    
    #<a href="/cse2421tldr/tags/memory-management/">memory management</a>&nbsp;
    
    #<a href="/cse2421tldr/tags/c/">c</a>&nbsp;
    
  </span>
  

  

  

  <div class="post-content"><div>
        <h1 id="lecture-10">Lecture 10<a href="#lecture-10" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h1>
<p><strong>Video</strong> : <a href="https://urldefense.com/v3/__https:/osu.zoom.us/rec/share/WZvVx2zl6V9HnHvMRhGh5wYCW-JrYk1sbO1Gc_ameCTbJbCjMRHixyuANxr16Ck.oE8IxmgUYIfWW0Ib__;!!KGKeukY!kA4SNYv_c1kvvDef8vv0W5hm8DH64nfNH9SVKKK8qjKMnIeP5cMZ9LqifSmmlT8S$">C Pointers 2 Part A</a>
<strong>Video</strong> : <a href="https://urldefense.com/v3/__https:/osu.zoom.us/rec/share/vOJVxqTeYidFIcPSzRaUIvcn4RqTD-t5gczkvalD4JEQDqq0JRzKv1VGRgtHJzpV.rGHOn0z00gdp5WGa__;!!KGKeukY!j7l0foPN46l1RAc-0hbrp4fR_wBnNR-MVXil6abd_lRDgXyTTFSPH9TzDqB8NZ38$">C Pointers 2 Part B</a></p>
<p><strong>Slides</strong> : <a href="https://osu.instructure.com/courses/95904/files/folder/Zoom%20classes?preview=28902214">C Pointers Part 2</a></p>
<h1 id="pointers-part-2">Pointers part 2<a href="#pointers-part-2" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h1>
<p>Relationship between arrays and pointers, void pointers, dynamic memory, pointer arithmetic, and passing pointers.</p>
<h2 id="arrays">Arrays<a href="#arrays" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h2>
<p>Arrays can only be accessed by pointers. Static arrays are allocated by the compiler, dynamic arrays must be allocated with <code>malloc</code> at runtime and will be referenced by a void pointer.</p>
<p>Except for strings, there is no library function to giv teh size of an array. Size must tracked in your own code.</p>
<blockquote>
<p>Take care to not access elements outside the bounds of an array. This will produce a segmentation fault or modify memory you did not intend.</p>
</blockquote>
<p>An array constant is the same as the address of the first element</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c" data-lang="c"><span style="color:#66d9ef">int</span> scores[<span style="color:#ae81ff">3</span>] <span style="color:#f92672">=</span> {<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">2</span>,<span style="color:#ae81ff">3</span>};
</code></pre></div><p>|Element|Address*|Value|
|~~~|~~~|~~~|
|scores[0]|0x600020|1|
|scores[1]|0x600024|2|
|scores[2]|0x600028|3|</p>
<p><code>scores</code> is the same as <code>&amp;scores[0]</code>. <code>&amp;scores</code> is something completely different.</p>
<h3 id="pointer-arithmetic">Pointer Arithmetic<a href="#pointer-arithmetic" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h3>
<p>Pointers can be added to and subtracted from by integers, and by each other. This is how move a pointer around and can be used like indexing.</p>
<blockquote>
<p>Does not apply to pointers to functions.</p>
</blockquote>
<p>Work with arrays without using the index notation.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c" data-lang="c"><span style="color:#75715e">#define SIZE 15
</span><span style="color:#75715e"></span><span style="color:#66d9ef">long</span> l_array[SIZE];
<span style="color:#66d9ef">long</span> <span style="color:#f92672">*</span>l_array_ptr <span style="color:#f92672">=</span> l_array;
<span style="color:#66d9ef">int</span> i;
<span style="color:#66d9ef">for</span> (i<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>; i<span style="color:#f92672">&lt;</span>SIZE; i<span style="color:#f92672">++&gt;</span>) {
    <span style="color:#f92672">*</span>l_array_ptr<span style="color:#f92672">++</span> <span style="color:#f92672">=</span> i; <span style="color:#75715e">/* Assign each element value i */</span>
}

<span style="color:#66d9ef">long</span> thirdValue <span style="color:#f92672">=</span> <span style="color:#f92672">*</span>(l_array <span style="color:#f92672">+</span> <span style="color:#ae81ff">3</span>) <span style="color:#75715e">/* same as l_array[3] */</span>
</code></pre></div><p>This works because arrays are stored contiguously in memory and the compiler knows the elements are <code>long</code>s. Adding 1 to a float pointer is in fact adding <code>(1 * (sizeof(long)))</code>.</p>
<p>The size of types is taken into account when adding and subtracting pointers. <code>int *p1 = fooArray;</code> and <code>int *p1 = fooArray+1;</code> are separated by 4 bytes <code>sizeof(int)</code>, however <code>p2-p1</code> is 1.</p>
<p>To get the actually number of bytes, cast to <code>unsigned long</code>. <code>((unsigned long)p2 - (unsigned long)p1)</code> is 4.</p>
<p>Pointers can be compared. <code>p2 &gt; p1</code> is 1. <code>p1 &gt; p2</code> is 0.</p>
<h3 id="pointers-to-void">Pointers to void<a href="#pointers-to-void" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h3>
<p>Address any kind of data however dereferencing must be cast to the correct pointer type. Makes typeless parameters possible but this is outside the scope of the course.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c" data-lang="c"><span style="color:#66d9ef">void</span> <span style="color:#f92672">*</span>pVoid;
<span style="color:#66d9ef">int</span> var1 <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>;
pVoid <span style="color:#f92672">=</span> <span style="color:#f92672">&amp;</span>var1;
printf(<span style="color:#e6db74">&#34;cast to dereference pVoid %d&#34;</span>, <span style="color:#f92672">*</span>(<span style="color:#66d9ef">int</span><span style="color:#f92672">*</span>)pVoid);
</code></pre></div><blockquote>
<p>You must cast first <code>(int*)</code> then dereference <code>*(int*)</code>.</p>
</blockquote>
<p>Dynamic allocations return a void pointer because <code>malloc</code> is made generic for all data types.</p>
<h2 id="dynamic-allocation">Dynamic Allocation<a href="#dynamic-allocation" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h2>
<p>Include stdlib.h</p>
<ul>
<li><code>void *malloc(size_t size);</code></li>
<li><code>void *calloc(site_t nmemb, stize_t size);</code></li>
<li><code>void free(void *ptr);</code></li>
<li><code>void *realloc(void *ptr, size_t size);</code></li>
</ul>
<blockquote>
<p>Always check the value of the returned void pointer. <code>null</code> indicates a failed <code>malloc</code> or <code>calloc</code> operation.</p>
</blockquote>
<blockquote>
<p>IMPORTANT - You will loose points for not checking for <code>null</code>.</p>
</blockquote>
<h3 id="malloc">malloc()<a href="#malloc" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h3>
<p>Returns a void pointer to as much allocated memory as specified by the argument. Memory will contain garbage values, values are not initialized.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c" data-lang="c"><span style="color:#66d9ef">int</span> <span style="color:#f92672">*</span>p;
p <span style="color:#f92672">=</span> malloc( <span style="color:#ae81ff">4</span> <span style="color:#f92672">*</span> <span style="color:#66d9ef">sizeof</span>(<span style="color:#66d9ef">int</span>) ); <span style="color:#75715e">/* 4 * 4 bytes, probably */</span>
</code></pre></div><blockquote>
<p>Always use <code>sizeof(type)</code>, In the example, <code>int</code> may not be 4 bytes.</p>
</blockquote>
<h3 id="calloc">calloc()<a href="#calloc" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h3>
<p>Returns a void pointer to as much allocated memory as specified by type and number arguments. Data is initialized.</p>

      </div></div>

  
  
<div class="pagination">
    <div class="pagination__title">
        <span class="pagination__title-h">Read other posts</span>
        <hr />
    </div>
    <div class="pagination__buttons">
        
        <span class="button previous">
            <a href="/cse2421tldr/posts/lecture-12/">
                <span class="button__icon">←</span>
                <span class="button__text">Lecture 12</span>
            </a>
        </span>
        
        
        <span class="button next">
            <a href="/cse2421tldr/posts/lecture-9/">
                <span class="button__text">Lecture 9</span>
                <span class="button__icon">→</span>
            </a>
        </span>
        
    </div>
</div>

  

  

</div>

  </div>

  
    <footer class="footer">
  <div class="footer__inner">
    
      <div class="copyright">
        <span>© 2021 Powered by <a href="http://gohugo.io">Hugo</a></span>
    
        <span>:: Theme made by <a href="https://twitter.com/panr">panr</a></span>
      </div>
  </div>
</footer>

<script src="/cse2421tldr/assets/main.js"></script>
<script src="/cse2421tldr/assets/prism.js"></script>







  
</div>

</body>
</html>
